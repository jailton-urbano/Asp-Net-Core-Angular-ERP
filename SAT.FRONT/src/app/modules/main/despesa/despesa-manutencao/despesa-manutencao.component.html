<mat-drawer-container class="flex-auto h-full" *transloco="let t">
    <mat-drawer-content>
        <div
            class="sm:absolute sm:inset-0 flex flex-col flex-auto min-w-0 sm:overflow-hidden bg-card dark:bg-transparent">
            <div class="relative flex flex-col sm:flex-row flex-0 sm:items-center sm:justify-between py-7 px-6 md:px-8
                border-b">
                <div class="absolute inset-x-0 bottom-0" *ngIf="isLoading">
                    <mat-progress-bar [mode]="'indeterminate'"></mat-progress-bar>
                </div>
                <div>
                    <div class="text-4xl font-extrabold tracking-tight">
                        {{ "RAT " + codRAT }}
                    </div>
                    <div class="text-lg font-semibold text-secondary tracking-tight" *ngIf="!isLoading">
                        {{ "OS " + rat?.codOS }} {{ " - " + ordemServico?.cliente?.nomeFantasia + ", " }}
                        {{ ordemServico?.cliente?.numBanco || '--' }}
                        {{ ordemServico?.localAtendimento?.numAgencia || '--' }}/{{ ordemServico?.localAtendimento?.dcPosto || '--' }}
                    </div>
                    <div class="text-lg font-semibold text-secondary tracking-tight" *ngIf="!isLoading">
                        {{  ordemServico?.localAtendimento?.endereco + ' - ' + ordemServico?.localAtendimento?.cidade?.nomeCidade + ' - ' + 
                                                        ordemServico?.localAtendimento?.cidade?.unidadeFederativa?.siglaUF
                                                        || 'não informado' }}
                    </div>

                </div>
            </div>
            <div class="relative flex flex-col sm:flex-row flex-0 sm:items-center px-2 sm:justify-between"
                *ngIf="!isLoading">
                <div class="flex flex-col flex-auto p-6 bg-card rounded-2xl overflow-hidden">
                    <div class="flex items-center justify-between">
                        <div class="text-2xl font-extrabold tracking-tight">
                            {{ t('despesas') | uppercase }}</div>
                    </div>
                    <div class="flex flex-col my-2" *ngIf="despesa?.despesaItens.length > 0">
                        <table mat-table [dataSource]="despesa?.despesaItens" class="mat-elevation-z4">

                            <ng-container matColumnDef="acao">
                                <th mat-header-cell *matHeaderCellDef> {{ t('acao') }} </th>
                                <td mat-cell *matCellDef="let di" class="text-sm"> {{ "---" }} </td>
                            </ng-container>

                            <ng-container matColumnDef="despesaTipo">
                                <th mat-header-cell *matHeaderCellDef> {{ t('tipo') }} </th>
                                <td mat-cell *matCellDef="let di" class="text-sm"> {{ di.despesaTipo?.nomeTipo }} </td>
                            </ng-container>

                            <ng-container matColumnDef="numNF">
                                <th mat-header-cell *matHeaderCellDef> {{ t('nf') }} </th>
                                <td mat-cell *matCellDef="let di" class="text-sm"> {{ di.numNF ?? "---" }} </td>
                            </ng-container>

                            <ng-container matColumnDef="quilometragem">
                                <th mat-header-cell *matHeaderCellDef> {{ t('quilometragem') }} </th>
                                <td mat-cell *matCellDef="let di" class="text-sm">
                                    {{ di.kmPercorrido != 0 ? di.kmPercorrido +"km" : "---" }}
                                </td>
                            </ng-container>

                            <ng-container matColumnDef="valorTotal">
                                <th mat-header-cell *matHeaderCellDef> {{ t('valor total') }} </th>
                                <td mat-cell *matCellDef="let di" class="text-sm">
                                    {{ di.despesaValor | currency:'BRL':'symbol-narrow' }}
                                </td>
                            </ng-container>

                            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                        </table>
                    </div>
                    <div class="flex items-center justify-between py-1" *ngIf="!despesa?.despesaItens.length">
                        <div class="text-lg font-semibold text-secondary tracking-tight">
                            {{ "Nenhuma despesa lançada até o momento!" }}</div>
                    </div>
                </div>
            </div>
        </div>
    </mat-drawer-content>
</mat-drawer-container>
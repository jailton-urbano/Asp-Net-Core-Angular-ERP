<form class="p-4 bg-card shadow rounded" [formGroup]="despesaItemForm">
    <mat-horizontal-stepper [linear]="true" #horizontalStepper>
        <mat-step [formGroupName]="'step1'" [stepControl]="despesaItemForm.get('step1')" #horizontalStepperStep1>
            <ng-template matStepLabel>Tipo de despesa</ng-template>
            <div class="flex flex-col gt-xs:flex-row">
                <mat-form-field class="flex-auto gt-xs:pr-3">
                    <mat-select formControlName="codDespesaTipo" required>
                        <mat-option *ngFor="let tipo of tiposDespesa" [value]="tipo.codDespesaTipo">
                            {{ tipo.nomeTipo }}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div class="flex justify-end">
                <button class="px-8" mat-flat-button [color]="'primary'"
                    [disabled]="horizontalStepperStep1.stepControl.pristine || horizontalStepperStep1.stepControl.invalid"
                    type="button" matStepperNext>
                    Próximo
                </button>
            </div>
        </mat-step>

        <mat-step [formGroupName]="'step2'" [stepControl]="despesaItemForm.get('step2')" #horizontalStepperStep2>
            <ng-template matStepLabel>Dados</ng-template>
            <div class="flex flex-col gt-xs:flex-row">
                <mat-form-field class="flex-auto gt-xs:pr-3">
                    <input matInput autocomplete="off" [formControlName]="'notaFiscal'" [placeholder]="'Nota Fiscal'">
                    <mat-icon class="icon-size-5" matPrefix [svgIcon]="'heroicons_solid:finger-print'"></mat-icon>
                </mat-form-field>
                <mat-form-field class="flex-auto gt-xs:pl-3">
                    <input matInput [formControlName]="'valor'" [placeholder]="'Valor'" mask="separator.2"
                        thousandSeparator="." decimalMarker="," prefix="R$" autocomplete="off"
                        [dropSpecialCharacters]="true" required>
                    <mat-icon class="icon-size-5" matPrefix [svgIcon]="'heroicons_solid:cash'">
                    </mat-icon>
                </mat-form-field>
            </div>
            <div class="flex justify-end">
                <button class="px-8 mr-2" mat-flat-button [color]="'accent'" type="button" matStepperPrevious>
                    Voltar
                </button>
                <button class="px-8" mat-flat-button [color]="'primary'"
                    [disabled]="horizontalStepperStep2.stepControl.pristine || horizontalStepperStep2.stepControl.invalid"
                    type="button" matStepperNext>
                    Próximo
                </button>
            </div>
        </mat-step>

        <mat-step [formGroupName]="'step3'" [stepControl]="despesaItemForm.get('step3')" #horizontalStepperStep3>
            <ng-template matStepLabel>Revisão</ng-template>
            <p class="my-2 font-medium">Revisão</p>
            <p>Tipo de despesa: {{ obterTipoDespesa() }} </p>
            <p>Nota fiscal: {{ this.despesaItemForm.value.step2.notaFiscal ?? "Não informada" }} </p>
            <p>Valor da despesa: {{ this.despesaItemForm.value.step2.valor | currency:'BRL':'symbol-narrow' }} </p>

            <div class="flex justify-end mt-8">
                <button class="px-8 mr-2" mat-flat-button [color]="'accent'" type="button" matStepperPrevious>
                    Voltar
                </button>
                <button class="px-8" mat-flat-button [color]="'primary'" type="reset" (click)="confirmar()">
                    Concluir
                </button>
            </div>
        </mat-step>
    </mat-horizontal-stepper>
</form>